package boj;

import java.io.*;
import java.util.*;

public class BOJ11576 {
    public void solve() throws IOException {
        // ğŸ“ ë¬¸ì œ ì„¤ëª…
        /*
         * ë¬¸ì œ:
         * íƒ€ì„ë¨¸ì‹ ì„ ê°œë°œí•˜ëŠ” ì •ì´ëŠ” ì˜¤ëœ ë…¸ë ¥ ëì— íƒ€ì„ë¨¸ì‹ ì„ ê°œë°œí•˜ëŠ”ë° ì„±ê³µí•˜ì˜€ë‹¤.
         * ë¯¸ë˜ê°€ ê¶ê¸ˆí•œ ì •ì´ëŠ” ìì‹ ì´ ê°œë°œí•œ íƒ€ì„ë¨¸ì‹ ì„ ì´ìš©í•˜ì—¬ 500ë…„ í›„ì˜ ì„¸ê³„ë¡œ ì—¬í–‰ì„ ë– ë‚˜ê²Œ ë˜ì—ˆë‹¤.
         * 500ë…„ í›„ì˜ ì„¸ê³„ì—ì„œë„ í”„ë¡œê·¸ë˜ë°ì„ í•˜ê³  ì‹¶ì—ˆë˜ ì •ì´ëŠ” ë°±ì¤€ ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ì—¬ ë¬¸ì œë¥¼ í’€ê¸°ë¡œ í•˜ì˜€ë‹¤.
         * ê·¸ëŸ¬ë‚˜ ë¯¸ë˜ì„¸ê³„ëŠ” Aì§„ë²•ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆê³ , Bì§„ë²•ì„ ì‚¬ìš©í•˜ë˜ ì •ì´ëŠ” ë¬¸ì œë¥¼ í’€ ìˆ˜ê°€ ì—†ì—ˆë‹¤.
         * ë›°ì–´ë‚œ í”„ë¡œê·¸ë˜ë¨¸ì˜€ë˜ ì •ì´ëŠ” Aì§„ë²•ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ìˆ«ìë¥¼ Bì§„ë²•ìœ¼ë¡œ ë³€í™˜ì‹œì¼œì£¼ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.
         * 
         * Nì§„ë²•ì´ë€, í•œ ìë¦¬ì—ì„œ ìˆ«ìë¥¼ í‘œí˜„í•  ë•Œ ì“¸ ìˆ˜ ìˆëŠ” ìˆ«ìì˜ ê°’ìˆ˜ê°€ Nì´ë¼ëŠ” ëœ»ì´ë‹¤.
         * ì˜ˆë¥¼ ë“¤ì–´ Nì´ 17ì¼ ë•Œ í•œ ìë¦¬ìˆ˜ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìˆ˜ëŠ” 0, 1, 2, ..., 16ìœ¼ë¡œ ì´ 17ê°€ì§€ê°€ ëœë‹¤.
         * 
         * ì…ë ¥:
         * ì…ë ¥ì˜ ì²« ì¤„ì—ëŠ” ë¯¸ë˜ì„¸ê³„ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì§„ë²• Aì™€ ì •ì´ê°€ ì‚¬ìš©í•˜ëŠ” ì§„ë²• Bê°€ ê³µë°±ì„ êµ¬ë¶„ìœ¼ë¡œ ì£¼ì–´ì§„ë‹¤.
         * Aì™€ BëŠ” ëª¨ë‘ 2ì´ìƒ 30ì´í•˜ì˜ ìì—°ìˆ˜ë‹¤.
         * 
         * ì…ë ¥ì˜ ë‘ ë²ˆì§¸ ì¤„ì—ëŠ” Aì§„ë²•ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ìˆ«ìì˜ ìë¦¬ìˆ˜ì˜ ê°œìˆ˜ m(1 â‰¤ m â‰¤ 25)ì´ ì£¼ì–´ì§„ë‹¤.
         * ì„¸ ë²ˆì§¸ ì¤„ì—ëŠ” Aì§„ë²•ì„ ì´ë£¨ê³  ìˆëŠ” ìˆ«ì mê°œê°€ ê³µë°±ì„ êµ¬ë¶„ìœ¼ë¡œ ë†’ì€ ìë¦¬ìˆ˜ë¶€í„° ì°¨ë¡€ëŒ€ë¡œ ì£¼ì–´ì§„ë‹¤.
         * ê° ìˆ«ìëŠ” 0ì´ìƒ Aë¯¸ë§Œì„ì´ ë³´ì¥ëœë‹¤.
         * ë˜í•œ ìˆ˜ê°€ 0ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš°ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
         * 
         * Aì§„ë²•ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ìˆ˜ë¥¼ 10ì§„ë²•ìœ¼ë¡œ ë³€í™˜í•˜ì˜€ì„ ë•Œ ê°’ì€ ì–‘ì˜ ì •ìˆ˜ì´ë©° 2Â³Â¹ë³´ë‹¤ ì‘ë‹¤.
         * 
         * ì¶œë ¥:
         * ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ Aì§„ë²•ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ìˆ˜ë¥¼ Bì§„ë²•ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì¶œë ¥í•œë‹¤.
         */


        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringBuilder sb = new StringBuilder();

        StringTokenizer st = new StringTokenizer(br.readLine());

        int A = Integer.parseInt(st.nextToken()); // ë¯¸ë˜ì„¸ê³„ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì§„ë²•
        int B = Integer.parseInt(st.nextToken()); // ì •ì´ê°€ ì‚¬ìš©í•˜ëŠ” ì§„ë²•

        int m = Integer.parseInt(br.readLine()); // Aì§„ë²•ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ìˆ«ìì˜ ìë¦¬ìˆ˜ì˜ ê°œìˆ˜


        // í•´ê²° key : Aì§„ë²• -> 10ì§„ë²• ë³€í™˜ -> Bì§„ë²• ë³€í™˜
        int decimal = 0; // 10ì§„ë²•ìœ¼ë¡œ ë³€í™˜í•œ ê°’

        st = new StringTokenizer(br.readLine());
        for(int i=0; i<m; i++) {
            if(i < m - 1) {
                decimal += Integer.parseInt(st.nextToken()) * Math.pow(A, m - i - 1); // Aì§„ë²• -> 10ì§„ë²• ë³€í™˜
            }
            else {
                decimal += Integer.parseInt(st.nextToken()); // Aì§„ë²• -> 10ì§„ë²• ë³€í™˜
            }
        }
        
        // ì—­ìˆœ ì¶œë ¥ì„ ìœ„í•œ strë°°ì—´
        String str[] = new String[32];

        int index = 0; // str ë°°ì—´ì˜ ì¸ë±ìŠ¤
        // 10ì§„ë²• -> Bì§„ë²• ë³€í™˜
        while(decimal > 0) {
            int remainder = decimal % B; // ë‚˜ë¨¸ì§€
            decimal /= B; // ëª«
            str[index] = String.valueOf(remainder); // ë‚˜ë¨¸ì§€ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜
            index++;
        }

        // str ë°°ì—´ì„ ì—­ìˆœìœ¼ë¡œ ì¶œë ¥
        for(int i=index-1; i>=0; i--) {
            sb.append(str[i]); // ì—­ìˆœìœ¼ë¡œ ì¶œë ¥
            if(i != 0) sb.append(" "); // ë§ˆì§€ë§‰ ìˆ«ì ë’¤ì—ëŠ” ê³µë°±ì„ ë„£ì§€ ì•ŠìŒ
        }

        System.out.println(sb);
    }
}
